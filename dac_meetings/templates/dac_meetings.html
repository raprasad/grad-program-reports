{% extends "report_base.html" %}
{% load url from future %}

{% block additional_header_info %}
{{ block.super }}
<script src="{{ STATIC_URL }}mco_assets/bootstrap/js/bootstrap.min.js"></script>
<script src="{{ STATIC_URL }}mco_assets/bootstrap/js/bootstrap-limit.js"></script>
<script type="text/javascript">

function shorten_url(){
    // reset error message div
    $('#url_shorten_err_msg').html('');
    $('#url_shorten_err_msg').hide();
    
    lnk_val = $('#id_link').val();
    if (lnk_val.length == 0){
        return;
    }
    if (lnk_val.length < 20){
        alert('The url doesn\'t need shortening');
        return;
    }
    
    url_str = "{#% url 'view_ajax_shorten_url' %#}?lnk=" + lnk_val;

    jQuery.ajax({
      url: url_str,
      success: function(data) {
          if (data.success == 1){
              //alert('new url ' + data.short_url );   
              $('#id_link').val(data.short_url);           
          }else{
              $('#url_shorten_err_msg').html(data.err_msg);
              $('#url_shorten_err_msg').show();              
          }
      }
    })
}

    $(function () {
        //alert('blah');
   });

</script>
{% endblock %}


{% block main_container %}


	{% if TWEET_SUCCESS %}
	 <div class="alert alert-success">
           Your tweet has been sent!  
    </div>
	{% endif %}
	
	{% if dac_form %}
	    {% include "dac_filter_form.html" %}
	{% endif %}
	
	<table class="table table-bordered table-hover">
        <thead>
            <tr>
                <th>#</th>
                <th>Meeting Type</th>
            	<th>Date of<br />Meeting</th>
            	<th>Last Name</th>
            	<th>First Name</th>
            	<th>Nominated<br /> for<br />Prize</th>
            	<th>Advisor</th>
            	<th>Student<br />Status</th>
            </tr>
        </thead>
        <tbody>
	{% for dm in dac_meetings %}
	    {% ifchanged dm.meeting_type %}
	        {% if not forloop.first %}
            <tr>
	            <td colspan="8">&nbsp;</td>
            </tr>
            {% endif %}
	    {% endifchanged %}
	        <tr>
	            <td>{{ forloop.counter }}</td>
	            <td>{{ dm.meeting_type }}</td>
	            <td><p class="text-right">{{ dm.date|date:"n/d/Y" }}</p></td>
	            <td>{{ dm.student.last_name }}</td>
	            <td>{{ dm.student.first_name }}</td>
	            <td>{% if dm.nominated_for_prize %}<span class="label label-success">Yes</span> 
	                {% else %} <span class="label">No</span> 
	                {% endif %}</td>
	            <td>{{ dm.student.get_current_advisor }}</td>
	            <td>{{ dm.student.status }}</td>
	        </tr>
	{% empty %}
	        <tr>
                <td colspan="8">
                    <div class="alert alert-error">No DAC meetings found for this time period.</div>
                </td>
            </tr>
	{% endfor %}
        </tbody>
	</table>
	
    
{% endblock %}



