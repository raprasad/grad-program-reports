{% extends "report_base.html" %}
{% load url from future %}

{% block additional_header_info %}
{{ block.super }}
<link href="{{ STATIC_URL }}mco_assets/datepicker/css/datepicker.css" rel="stylesheet">

<script src="{{ STATIC_URL }}mco_assets/bootstrap/js/bootstrap.min.js"></script>
<script src="{{ STATIC_URL }}mco_assets/bootstrap/js/bootstrap-limit.js"></script>
<script src="{{ STATIC_URL }}mco_assets/datepicker/js/bootstrap-datepicker.js"></script>
<style type="text/css">
#tbl_dac_filter_form{width:640px;}
#tbl_dac_filter_form td{ vertical-align:top;
        padding:5px 10px;}

#tbl_dac_filter_form ul {list-style-type:none;
     padding:0;
     margin:5px;
     }
</style>
<script type="text/javascript">

function shorten_url(){
    // reset error message div
    $('#url_shorten_err_msg').html('');
    $('#url_shorten_err_msg').hide();
    
    lnk_val = $('#id_link').val();
    if (lnk_val.length == 0){
        return;
    }
    if (lnk_val.length < 20){
        alert('The url doesn\'t need shortening');
        return;
    }
    
    url_str = "{#% url 'view_ajax_shorten_url' %#}?lnk=" + lnk_val;

    jQuery.ajax({
      url: url_str,
      success: function(data) {
          if (data.success == 1){
              //alert('new url ' + data.short_url );   
              $('#id_link').val(data.short_url);           
          }else{
              $('#url_shorten_err_msg').html(data.err_msg);
              $('#url_shorten_err_msg').show();              
          }
      }
    })
}

    $(function () {
        $('#id_start_date').datepicker();
        $('#id_end_date').datepicker();
        //alert('blah');
   });

</script>
{% endblock %}


{% block main_container %}

{#{QUERY_STRING}#}
	
	{% if dac_form %}
	    {% include "dac_filter_form.html" %}
	{% endif %}
	{% if not ERR_form_not_valid %}
        {% include "dac_table_results.html" %}
    {% endif %}
	
    {% include "sql_query_debug.html" %}
{% endblock %}



